/* --- 核心变量 & 主题系统 --- */
:root {
    /* 动画缓动函数 */
    --ease-out-quad: cubic-bezier(0.25, 0.46, 0.45, 0.94);
    --ease-out-quart: cubic-bezier(0.165, 0.84, 0.44, 1);
    --ease-in-out-smooth: cubic-bezier(0.76, 0, 0.24, 1);

    /* [新增] 字体变量 */
    --font-sans: 'Noto Sans SC', sans-serif;
    --font-serif: 'Noto Serif SC', serif;
    --font-script: 'Sacramento', cursive; /* 默认花体英文 */
    
    /* 默认 light 主题颜色 */
    --bg-color: #f8f9fa;
    --container-bg: #ffffff;
    --secondary-bg: #f1f3f5;
    --text-color: #212529;
    --meta-color: #868e96;
    --border-color: #e9ecef;
    --accent-color: #007bff;
    --accent-color-hover: #0056b3;
    --shadow-color: rgba(0, 0, 0, 0.08);
    --danger-color: #dc3545;
    --danger-color-hover: #c82333;
    --avatar-default-bg: #e0e0e0;

    /* Toast 消息系统变量 */
    --toast-bg-success: #28a745;
    --toast-bg-error: #dc3545;
    --toast-bg-info: #007bff;
    --toast-text-color: white;
    --toast-shadow: rgba(0, 0, 0, 0.2);

    /* 日记本变量 */
    --book-cover-color: #8B4513;
    --book-page-color: #fffef5;
    --book-spine-color: #654321;
    
    /* [新增] 3D日记本字体变量 */
    --book-font-zh: var(--font-sans);
    --book-font-en: var(--font-script);
}

/* === 主题定义 === */
html[data-theme='dark'] { --bg-color: #121212; --container-bg: #1e1e1e; --secondary-bg: #2a2a2a; --text-color: #e0e0e0; --meta-color: #999999; --border-color: #333333; --accent-color: #3b82f6; --accent-color-hover: #2563eb; --shadow-color: rgba(0, 0, 0, 0.3); --danger-color: #e74c3c; --danger-color-hover: #c0392b; --avatar-default-bg: #404040; --toast-shadow: rgba(0, 0, 0, 0.5); --book-cover-color: #2c1810; --book-page-color: #2a2a2a; }
html[data-theme='dusk'] { --bg-color: #f3eada; --container-bg: #fffbf5; --secondary-bg: #f8f1e5; --text-color: #4a4a4a; --meta-color: #8c7d6b; --border-color: #e4dacc; --accent-color: #d19a66; --accent-color-hover: #b88657; --shadow-color: rgba(140, 125, 107, 0.15); --danger-color: #ce4a4a; --danger-color-hover: #a13636; --avatar-default-bg: #d4c4b0; --book-cover-color: #8B7355; --book-page-color: #faf6ed; }
html[data-theme='morandi-pink'] { --bg-color: #f5e6e8; --container-bg: #fff5f6; --secondary-bg: #f0dde0; --text-color: #5c4a4d; --meta-color: #9a8385; --border-color: #e8d4d7; --accent-color: #c4a4a7; --accent-color-hover: #a88a8d; --shadow-color: rgba(196, 164, 167, 0.2); --danger-color: #c97b7b; --danger-color-hover: #a85d5d; --avatar-default-bg: #dcc4c7; --book-cover-color: #a88a8d; --book-page-color: #fff8f8; }
html[data-theme='morandi-blue'] { --bg-color: #e4e9ed; --container-bg: #f5f8fa; --secondary-bg: #dce3e8; --text-color: #4a5568; --meta-color: #7a8a99; --border-color: #cdd6de; --accent-color: #8fa4b5; --accent-color-hover: #7590a5; --shadow-color: rgba(143, 164, 181, 0.2); --danger-color: #b07d7d; --danger-color-hover: #946363; --avatar-default-bg: #b8c5d0; --book-cover-color: #6b8299; --book-page-color: #f8fafc; }
html[data-theme='morandi-green'] { --bg-color: #e8ebe6; --container-bg: #f6f8f4; --secondary-bg: #dfe3da; --text-color: #4a5245; --meta-color: #7d8578; --border-color: #d1d6cb; --accent-color: #9aab8f; --accent-color-hover: #829578; --shadow-color: rgba(154, 171, 143, 0.2); --danger-color: #b08080; --danger-color-hover: #946666; --avatar-default-bg: #c2ccba; --book-cover-color: #6b7a62; --book-page-color: #f9faf7; }
html[data-theme='morandi-grey'] { --bg-color: #e8e8e6; --container-bg: #f7f7f5; --secondary-bg: #dfdedd; --text-color: #4f4f4d; --meta-color: #8a8a88; --border-color: #d4d4d2; --accent-color: #a3a3a0; --accent-color-hover: #8a8a87; --shadow-color: rgba(163, 163, 160, 0.2); --danger-color: #b08080; --danger-color-hover: #946666; --avatar-default-bg: #c7c7c4; --book-cover-color: #6e6e6b; --book-page-color: #fafaf8; }

/* --- 全局样式 & 日记主区域 --- */
* { box-sizing: border-box; margin: 0; padding: 0; }
body { background-color: var(--bg-color); color: var(--text-color); line-height: 1.8; font-size: 16px; transition: background-color 0.3s, color 0.3s; min-height: 100vh; font-family: var(--font-sans); }
.container { max-width: 800px; margin: 40px auto; padding: 20px; position: relative; }
header { display: flex; justify-content: space-between; align-items: center; padding-bottom: 20px; border-bottom: 1px solid var(--border-color); margin-bottom: 30px; flex-wrap: wrap; gap: 15px; }
header h1 { font-size: 28px; font-weight: 600; margin-right: auto; background: linear-gradient(135deg, var(--accent-color), var(--accent-color-hover)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
.header-actions { display: flex; align-items: center; gap: 15px; }
.action-btn { background-color: var(--accent-color); color: white; border: none; padding: 10px 20px; border-radius: 8px; font-size: 15px; cursor: pointer; transition: background-color 0.3s, transform 0.3s, box-shadow 0.3s; font-weight: 500; font-family: inherit; }
.action-btn:hover { background-color: var(--accent-color-hover); transform: translateY(-2px); box-shadow: 0 4px 12px var(--shadow-color); }
.header-icon-btn { background: none; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; width: 44px; height: 44px; border-radius: 50%; transition: background-color 0.3s, transform 0.3s; position: relative; }
.header-icon-btn:hover { background-color: var(--secondary-bg); transform: scale(1.1); }
.header-icon-btn svg { width: 24px; height: 24px; fill: var(--meta-color); transition: fill 0.3s; }
#header-avatar-display { width: 36px; height: 36px; border-radius: 50%; background-color: var(--avatar-default-bg); display: flex; align-items: center; justify-content: center; font-size: 16px; font-weight: 500; color: var(--text-color); transition: transform 0.3s, box-shadow 0.3s; overflow: hidden; }
#header-avatar-display:hover { transform: scale(1.1); box-shadow: 0 2px 8px var(--shadow-color); }
.header-controls { display: flex; align-items: center; gap: 15px; flex-grow: 1; justify-content: flex-end; }
.search-area { position: relative; max-width: 300px; width: 100%; }
#search-input { width: 100%; padding: 10px 40px 10px 16px; border: 2px solid var(--border-color); border-radius: 20px; background-color: var(--secondary-bg); color: var(--text-color); font-size: 15px; transition: all 0.3s; font-family: inherit; }
#search-input:focus { outline: none; border-color: var(--accent-color); box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent-color) 20%, transparent); background-color: var(--container-bg); }
#clear-search-btn { position: absolute; right: 12px; top: 50%; transform: translateY(-50%); background: none; border: none; color: var(--meta-color); font-size: 20px; cursor: pointer; opacity: 0; pointer-events: none; transition: opacity 0.3s ease; }
#search-input:not(:placeholder-shown) + #clear-search-btn { opacity: 1; pointer-events: auto; }
#diary-thread { display: flex; flex-direction: column; gap: 25px; }
.diary-entry { background-color: var(--container-bg); border-radius: 16px; box-shadow: 0 4px 25px var(--shadow-color); transition: transform 0.3s, box-shadow 0.3s; animation: fadeInUp 0.5s; transform: translateZ(0); }
.diary-entry:hover { transform: translateY(-4px); box-shadow: 0 8px 35px var(--shadow-color); }
@keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
.entry-meta { display: flex; justify-content: space-between; align-items: center; padding: 20px 24px; color: var(--meta-color); font-size: 14px; flex-wrap: wrap; gap: 12px 20px; border-bottom: 1px solid var(--border-color); }
.author-info { display: flex; align-items: center; gap: 12px; flex-shrink: 0; font-weight: 500; }
.entry-metadata-details { display: flex; align-items: center; gap: 12px; flex-grow: 1; flex-wrap: wrap; }
.entry-tags { display: flex; flex-wrap: wrap; gap: 6px; margin-left: auto; }
.entry-actions { display: flex; gap: 8px; align-items: center; }
.icon-btn { background: none; border: none; padding: 5px; cursor: pointer; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: background-color 0.3s ease; }
.icon-btn:hover { background-color: var(--secondary-bg); }
.icon-btn svg { width: 20px; height: 20px; fill: var(--meta-color); }
.avatar { width: 32px; height: 32px; border-radius: 50%; background-color: var(--avatar-default-bg); display: inline-flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 500; color: var(--text-color); flex-shrink: 0; transition: transform 0.3s; overflow: hidden; }
.tag { background: color-mix(in srgb, var(--accent-color) 10%, transparent); color: var(--accent-color); padding: 4px 12px; border-radius: 16px; font-size: 12px; font-weight: 500; border: 1px solid color-mix(in srgb, var(--accent-color) 20%, transparent); }
.entry-content { padding: 24px; font-size: 16px; line-height: 1.8; color: var(--text-color); }
.entry-content p:last-child { margin-bottom: 0; }
.empty-message { text-align: center; padding: 80px 20px; color: var(--meta-color); background-color: var(--container-bg); border-radius: 16px; }

/* --- 按钮样式 --- */
.btn-primary, .btn-secondary, .btn-danger { padding: 12px 24px; border-radius: 8px; font-size: 15px; font-weight: 500; cursor: pointer; transition: all 0.3s; border: none; font-family: inherit; display: inline-flex; align-items: center; justify-content: center; gap: 8px; }
.btn-primary { background-color: var(--accent-color); color: white; }
.btn-primary:hover:not(:disabled) { background-color: var(--accent-color-hover); transform: translateY(-2px); box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15); }
.btn-secondary { background-color: var(--secondary-bg); color: var(--text-color); border: 1px solid var(--border-color); }
.btn-secondary:hover:not(:disabled) { background-color: var(--border-color); transform: translateY(-2px); }
.btn-danger { background-color: var(--danger-color); color: white; }
.btn-danger:hover:not(:disabled) { background-color: var(--danger-color-hover); transform: translateY(-2px); }
button:disabled { opacity: 0.6; cursor: not-allowed; }

/* --- 模态框样式 --- */
.modal-overlay { position: fixed; inset: 0; background-color: rgba(0, 0, 0, 0.5); display: flex; align-items: center; justify-content: center; z-index: 1000; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; backdrop-filter: blur(4px); }
.modal-overlay.active { opacity: 1; visibility: visible; }
.modal-content { background-color: var(--container-bg); border-radius: 16px; padding: 32px; max-width: 600px; width: 90%; max-height: 85vh; overflow-y: auto; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); transform: scale(0.95); opacity: 0; transition: transform 0.3s, opacity 0.3s; }
.modal-overlay.active .modal-content { transform: scale(1); opacity: 1; }
.modal-content h2 { margin-bottom: 20px; font-size: 24px; font-weight: 600; }
.modal-actions { display: flex; gap: 12px; justify-content: flex-end; margin-top: 24px; }

/* --- 写日记模态框 --- */
#diary-textarea { width: 100%; min-height: 200px; padding: 16px; border: 2px solid var(--border-color); border-radius: 8px; background-color: var(--bg-color); color: var(--text-color); font-size: 16px; font-family: inherit; line-height: 1.8; resize: vertical; margin-bottom: 12px; transition: all 0.3s ease; }
#diary-textarea:focus { outline: none; border-color: var(--accent-color); background-color: var(--container-bg); box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent-color) 20%, transparent); }
.entry-toolbar { display: flex; gap: 8px; margin-bottom: 12px; }
.toolbar-icon-btn { display: flex; align-items: center; justify-content: center; width: 36px; height: 36px; border-radius: 8px; background-color: var(--secondary-bg); border: 1px solid var(--border-color); cursor: pointer; transition: all 0.3s ease; }
.toolbar-icon-btn:hover { background-color: var(--border-color); }
.toolbar-icon-btn svg { width: 20px; height: 20px; fill: var(--meta-color); }
#tags-input-container { margin-bottom: 12px; }
#entry-tags-input { width: 100%; padding: 10px 14px; border: 2px solid var(--border-color); border-radius: 8px; background-color: var(--bg-color); }

/* --- 个人主页模态框 --- */
.profile-header { text-align: center; margin-bottom: 24px; }
.profile-avatar { width: 90px; height: 90px; border-radius: 50%; background-color: var(--avatar-default-bg); margin: 0 auto 16px; display: flex; align-items: center; justify-content: center; font-size: 40px; font-weight: 500; color: var(--text-color); border: 4px solid var(--container-bg); box-shadow: 0 4px 15px var(--shadow-color); overflow: hidden; }
.profile-name { font-size: 22px; font-weight: 600; margin-bottom: 4px; }
.signature { color: var(--meta-color); font-size: 14px; }
.profile-stats-container { display: flex; justify-content: space-around; background-color: var(--secondary-bg); padding: 20px; border-radius: 12px; }
.profile-stats-item { text-align: center; }
.profile-stats-value { font-size: 24px; font-weight: 600; color: var(--accent-color); }
.profile-stats-label { font-size: 12px; color: var(--meta-color); text-transform: uppercase; }

/* --- 表单 & 设置 --- */
.form-group { margin-bottom: 20px; }
.form-group label { display: block; font-weight: 500; margin-bottom: 8px; font-size: 14px; }
.form-group input[type="text"], .form-group input[type="url"], .form-group textarea { width: 100%; padding: 12px; border: 2px solid var(--border-color); border-radius: 8px; background-color: var(--bg-color); color: var(--text-color); font-family: inherit; font-size: 15px; transition: all 0.3s ease; }
.form-group input:focus, .form-group textarea:focus { outline: none; border-color: var(--accent-color); background-color: var(--container-bg); }
.avatar-preview-container { display: flex; align-items: center; gap: 16px; }
.avatar-preview { width: 70px; height: 70px; border-radius: 50%; background-color: var(--secondary-bg); display: flex; align-items: center; justify-content: center; overflow: hidden; border: 2px dashed var(--border-color); cursor: pointer; }
.radio-group { display: flex; gap: 10px; flex-wrap: wrap; }
.radio-label { display: inline-block; background: var(--secondary-bg); padding: 10px 16px; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; user-select: none; }
.radio-label input { display: none; }
.radio-label:has(input:checked) { background: var(--accent-color); color: white; box-shadow: 0 2px 8px color-mix(in srgb, var(--accent-color) 30%, transparent); }
.data-action-card { display: flex; justify-content: space-between; align-items: center; padding: 16px; background-color: var(--secondary-bg); border-radius: 12px; margin-bottom: 12px; border: 1px solid var(--border-color); }
.data-action-card.danger { background-color: color-mix(in srgb, var(--danger-color) 10%, transparent); border-color: color-mix(in srgb, var(--danger-color) 30%, transparent); }
.data-action-info h4 { font-size: 16px; margin-bottom: 4px; }
.data-action-info p { font-size: 13px; color: var(--meta-color); margin: 0; }
#clear-data-confirm-input { width: 100%; text-align: center; font-size: 18px; padding: 12px; margin-top: 10px; letter-spacing: 4px; background-color: var(--bg-color); border: 2px solid var(--border-color); border-radius: 8px; }
.settings-modal-content { max-width: 800px; }
.settings-main-area { display: flex; min-height: 400px; border: 1px solid var(--border-color); border-radius: 12px; overflow: hidden; background-color: var(--bg-color); }
.settings-nav { width: 180px; background-color: var(--secondary-bg); border-right: 1px solid var(--border-color); flex-shrink: 0; }
.settings-nav ul { list-style: none; padding: 0; margin: 0; }
.settings-nav li { padding: 16px 20px; cursor: pointer; transition: all 0.3s; border-left: 3px solid transparent; font-weight: 500; font-size: 14px; }
.settings-nav li:hover { background-color: var(--bg-color); border-left-color: var(--border-color); }
.settings-nav li.active { background-color: var(--container-bg); color: var(--accent-color); border-left-color: var(--accent-color); }
.settings-content-area { flex: 1; padding: 24px; background-color: var(--container-bg); overflow-y: auto; }
.settings-panel { display: none; } .settings-panel.active { display: block; animation: fadeIn 0.3s ease; } @keyframes fadeIn{from{opacity: 0} to {opacity: 1}}
.settings-panel h3 { margin-bottom: 20px; font-size: 18px; font-weight: 600; }
.settings-section { margin-bottom: 30px; }
.section-desc { color: var(--meta-color); font-size: 14px; margin-bottom: 15px; }
.theme-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 15px; }
.theme-option { cursor: pointer; text-align: center; }
.theme-option.active .theme-preview { border-color: var(--accent-color); box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent-color) 30%, transparent) }
.theme-preview { width: 100%; min-height: 60px; border-radius: 8px; border: 2px solid var(--border-color); transition: all 0.3s; display: flex; }
.theme-preview:hover { transform: scale(1.05); box-shadow: 0 4px 15px var(--shadow-color); }
.theme-preview span { flex:1; }
.theme-preview-light { background: linear-gradient(-45deg, #f8f9fa 50%, #ffffff 50%); }
.theme-preview-dark { background: linear-gradient(-45deg, #121212 50%, #1e1e1e 50%); }
.theme-preview-dusk { background: linear-gradient(-45deg, #f3eada 50%, #fffbf5 50%); }
.theme-preview-morandi-pink { background: linear-gradient(-45deg, #f5e6e8 50%, #fff5f6 50%); }
.theme-preview-morandi-blue { background: linear-gradient(-45deg, #e4e9ed 50%, #f5f8fa 50%); }
.theme-preview-morandi-green { background: linear-gradient(-45deg, #e8ebe6 50%, #f6f8f4 50%); }
.theme-preview-morandi-grey { background: linear-gradient(-45deg, #e8e8e6 50%, #f7f7f5 50%); }
.font-options { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; }
.font-option {
    padding: 15px; border: 2px solid var(--border-color); border-radius: 12px; cursor: pointer;
    text-align: center; transition: all 0.3s; background-color: var(--secondary-bg); 
}
.font-option:hover { transform: translateY(-2px); border-color: var(--accent-color); }
.font-option.active { border-color: var(--accent-color); background-color: color-mix(in srgb, var(--accent-color) 10%, transparent); box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent-color) 20%, transparent); }
.font-preview { font-size: 1.8rem; margin-bottom: 8px; }
.font-sans { font-family: var(--font-sans); } .font-serif { font-family: var(--font-serif); }
.add-font-form { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
.add-font-form input { flex: 1; min-width: 150px; }
#custom-font-list { list-style: none; padding: 0; margin: 0; }
#custom-font-list li { display: flex; justify-content: space-between; align-items: center; padding: 10px 14px; background-color: var(--secondary-bg); border-radius: 8px; font-size: 14px; margin-bottom: 8px; }
.delete-font-btn { border: none; background: none; color: var(--meta-color); font-size: 20px; cursor: pointer; transition: color 0.2s; }
.delete-font-btn:hover { color: var(--danger-color); }

/* === 3D 日记本样式 === */
#diary-book-3d { padding: 20px; }
.book-container { max-width: 700px; margin: 40px auto; perspective: 2000px; }
.book { position: relative; width: 100%; padding-bottom: 140%; transform-style: preserve-3d; }
.book-cover { position: absolute; top: 0; left: 0; width: 100%; height: 100%; transform-style: preserve-3d; z-index: 100; transform-origin: left center; transition: transform 1.4s var(--ease-in-out-smooth); transform: rotateY(0deg); }
.book-cover.opened { transform: rotateY(-180deg); pointer-events: none; }
.cover-front { position: absolute; width: 100%; height: 100%; background: linear-gradient(145deg, var(--book-cover-color), color-mix(in srgb, var(--book-cover-color) 70%, black)); border-radius: 4px 16px 16px 4px; box-shadow: inset 0 0 80px rgba(0,0,0,0.2); backface-visibility: hidden; display: flex; flex-direction: column; align-items: center; justify-content: center; color: rgba(255,255,255,0.9); }
.cover-title { font-size: 28px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
.cover-subtitle { font-size: 14px; opacity: 0.8; margin-top: 5px;}
.cover-icon { margin-top: 20px; }
.cover-icon svg { fill: currentColor; }
.book-pages { position: absolute; top: 0; left: 0; width: 100%; height: 100%; transform-style: preserve-3d; z-index: 1; opacity: 0; transition: opacity 0.3s ease; }
.book-pages.visible { opacity: 1; }
.pages-container { position: absolute; top: 5px; left: 0; width: 100%; height: calc(100% - 10px); }
.book-page { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--book-page-color); transform-origin: left center; transition: transform 1.2s var(--ease-in-out-smooth); backface-visibility: hidden; overflow: hidden; transform: rotateY(0deg); }
.book-page.flipped { transform: rotateY(-180deg); pointer-events: none; user-select: none; }
.page-content-wrapper { padding: 30px 40px; height: 100%; overflow-y: auto; }
/* [关键修改] 应用日记本字体变量 */
.page-content { font-family: var(--book-font-en), var(--book-font-zh), sans-serif; }
.page-header { margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px dashed var(--border-color); }
.page-number { position: absolute; bottom: 20px; right: 30px; font-size: 12px; color: var(--meta-color); }
.empty-page { text-align: center; padding-top: 40%; color: var(--meta-color); }
.book-controls-overlay { position: absolute; bottom: 0; left: 0; right: 0; display: flex; justify-content: space-between; padding: 15px 30px; background: linear-gradient(to top, rgba(0,0,0,0.05), transparent); transition: opacity 0.3s; z-index: 1000; }
.page-nav-btn { background: var(--secondary-bg); border: 1px solid var(--border-color); border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s; }
.page-nav-btn:hover { transform: scale(1.1); }
.page-indicator { font-size: 13px; font-weight: 500; background: var(--secondary-bg); padding: 5px 15px; border-radius: 20px; border: 1px solid var(--border-color); }
.close-book-btn { display: flex; align-items: center; gap: 8px; margin: 20px auto 0; padding: 12px 24px; background-color: var(--secondary-bg); border: 1px solid var(--border-color); border-radius: 8px; cursor: pointer; }
.close-book-btn svg { width: 16px; height: 16px; fill: var(--meta-color); }

/* --- Toast, Loading, ScrollToTop, Responsive etc. --- */
#toast-container { position: fixed; top: 24px; right: 24px; z-index: 10000; }
.toast { background-color: var(--container-bg); padding: 16px 24px; border-radius: 8px; margin-bottom: 12px; box-shadow: 0 4px 20px var(--toast-shadow); opacity: 0; transform: translateX(100%); transition: all 0.3s; border-left: 4px solid var(--accent-color); min-width: 280px; font-weight: 500; }
.toast.show { opacity: 1; transform: translateX(0); }
.toast.success { border-left-color: var(--toast-bg-success); } .toast.error { border-left-color: var(--toast-bg-error); } .toast.info { border-left-color: var(--toast-bg-info); }
#loading-overlay { position: fixed; inset: 0; background-color: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 10000; backdrop-filter: blur(4px); }
#loading-overlay.hidden { display: none; }
.spinner { width: 50px; height: 50px; border: 4px solid var(--border-color); border-top: 4px solid var(--accent-color); border-radius: 50%; animation: spin 1s linear infinite; }
@keyframes spin { 100% { transform: rotate(360deg); } }
.scroll-to-top-btn { position: fixed; bottom: 24px; right: 24px; width: 50px; height: 50px; background-color: var(--accent-color); color: white; border: none; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 20px rgba(0,0,0,0.2); opacity: 0; visibility: hidden; transition: all 0.3s; transform: translateY(10px); }
.scroll-to-top-btn.show { opacity: 1; visibility: visible; transform: translateY(0); }
@media (max-width: 768px) { .container { margin: 20px auto; padding: 16px; width: 100%; } header { flex-direction: column; align-items: stretch; } .header-controls { justify-content: stretch; } .search-area { max-width: 100%; } .modal-overlay { align-items: flex-end; } .modal-content { width: 100%; margin:0; max-height: 90vh; border-radius: 16px 16px 0 0; } .settings-main-area { flex-direction: column; } .settings-nav { width: 100%; border:0; } .settings-nav ul { display: flex; overflow-x: auto; border-bottom: 1px solid var(--border-color);} .settings-nav li { flex-shrink: 0;  white-space: nowrap; border-left:0; border-right: 1px solid var(--border-color);} .book { padding-bottom: 150%; } }
.hidden { display: none !important; }
.visually-hidden { position: absolute !important; width: 1px !important; height: 1px !important; padding: 0 !important; margin: -1px !important; overflow: hidden !important; clip: rect(0, 0, 0, 0) !important; white-space: nowrap !important; border: 0 !important; }

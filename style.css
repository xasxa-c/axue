/**
 * SimpleDiaryApp Styles - v5.3 (视觉与代码重构版)
 * -------------------------------------------
 * - [架构] 全面引入基于CSS变量的设计系统，统一管理颜色、字体、间距、阴影等。
 * - [视觉] 精心调校了整体UI，提升了组件的精致度、空间感和交互动效。
 * - [结构] 优化代码组织结构，采用清晰的模块化注释，提升可读性和可维护性。
 * - [交互] 增强了按钮、输入框等元素的hover和focus状态，提供更细腻的反馈。
 * - [组件] 对日记卡片、模态框、设置面板等核心组件进行了视觉和体验升级。
 */

/* 1. FONT IMPORTS */
@import url("https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap");
@import url("data:text/css,%40font-face%7Bfont-family%3A%22ZSFT-hd%22%3Bsrc%3Aurl(%22https%3A%2F%2Ffontsapi.zeoseven.com%2Fhd%2Fmedium.woff2%22)%20format(%22woff2%22)%2Curl(%22https%3A%2F%2Ffontsapi-storage.zeoseven.com%2Fhd%2Fmedium.woff2%22)%20format(%22woff2%22)%3Bfont-style%3Anormal%3Bfont-weight%3A500%3Bfont-display%3Aswap%3B%7D%40font-face%7Bfont-family%3A%22ZSFT-hd%22%3Bsrc%3Aurl(%22https%3A%2F%2Ffontsapi.zeoseven.com%2Fhd%2Fmain.woff2%22)%20format(%22woff2%22)%2Curl(%22https%3A%2F%2Ffontsapi-storage.zeoseven.com%2Fhd%2Fmain.woff2%22)%20format(%22woff2%22)%3Bfont-style%3Anormal%3Bfont-weight%3A400%3Bfont-display%3Aswap%3B%7D");
@import url("https://fontsapi.zeoseven.com/96/main/result.css");


/* 2. DESIGN SYSTEM & THEME VARIABLES */
:root {
    /* Colors */
    --c-primary: #007aff;
    --c-primary-hover: #0056b3;
    --c-primary-light: rgba(0, 122, 255, 0.1);
    --c-danger: #ff3b30;
    --c-success: #34c759;
    --c-white: #ffffff;
    --c-black: #000000;

    /* Spacing */
    --space-xs: 4px; --space-sm: 8px; --space-md: 16px; --space-lg: 24px; --space-xl: 32px;

    /* Typography */
    --font-ui-family: "Noto Sans SC", system-ui, -apple-system, sans-serif;
    --font-main-family: "ZSFT-hd", "Noto Sans SC", sans-serif;
    --font-main-size: 16px;
    --font-book-family: "Source Han Serif SC", serif;
    --font-book-size: 18px;

    /* Borders & Radius */
    --border-width: 1px;
    --radius-sm: 4px;
    --radius-md: 8px;
    --radius-lg: 16px;
    --radius-full: 9999px;

    /* Shadows */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    
    /* Transitions */
    --transition-fast: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
    
    /* Light Theme */
    --c-bg: #f8f9fa;
    --c-surface: var(--c-white);
    --c-surface-hover: #f1f3f5;
    --c-text-1: #212529;
    --c-text-2: #495057;
    --c-text-3: #adb5bd;
    --c-border: #dee2e6;
    --c-focus-ring: rgba(0, 122, 255, 0.25);
}

[data-theme="dark"] {
    --c-bg: #121212;
    --c-surface: #1e1e1e;
    --c-surface-hover: #2a2a2a;
    --c-text-1: #e9ecef;
    --c-text-2: #ced4da;
    --c-text-3: #6c757d;
    --c-border: #343a40;
    --c-focus-ring: rgba(0, 122, 255, 0.3);
}

/* 3. GLOBAL RESET & BASE STYLES */
*, *::before, *::after { box-sizing: border-box; }
body {
    margin: 0;
    font-family: var(--font-ui-family);
    background-color: var(--c-bg);
    color: var(--c-text-1);
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    transition: background-color 300ms, color 300ms;
}
.hidden { display: none !important; }

/* 4. LAYOUT */
.main-header {
    background-color: var(--c-surface);
    border-bottom: var(--border-width) solid var(--c-border);
    padding: 0 var(--space-lg);
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: sticky; top: 0; z-index: 100;
    height: 64px;
    box-shadow: var(--shadow-sm);
}
.main-container { max-width: 800px; margin: 0 auto; padding: var(--space-xl) var(--space-lg); }
.logo { font-size: 20px; font-weight: 700; }
.header-actions { display: flex; align-items: center; gap: var(--space-sm); }

/* 5. COMPONENTS */

/* --- Buttons --- */
.btn, .icon-btn {
    display: inline-flex; align-items: center; justify-content: center;
    border: var(--border-width) solid transparent;
    border-radius: var(--radius-md);
    font-size: 14px; font-weight: 500;
    padding: var(--space-sm) var(--space-md);
    cursor: pointer;
    transition: var(--transition-fast);
    user-select: none;
    gap: var(--space-sm);
}
.btn:focus, .icon-btn:focus { outline: none; box-shadow: 0 0 0 3px var(--c-focus-ring); }
.btn-primary { background-color: var(--c-primary); color: var(--c-white); }
.btn-primary:hover { background-color: var(--c-primary-hover); transform: translateY(-1px); }
.btn-primary:disabled { background-color: #a0cfff; cursor: not-allowed; transform: none; box-shadow: none; }
.btn-secondary { background-color: var(--c-surface); border-color: var(--c-border); color: var(--c-text-1); }
.btn-secondary:hover { background-color: var(--c-surface-hover); }
.icon-btn {
    background-color: transparent; color: var(--c-text-2);
    width: 40px; height: 40px; padding: 0;
    border-radius: var(--radius-full);
}
.icon-btn:hover { background-color: var(--c-surface-hover); color: var(--c-primary); }
.icon-btn svg { width: 22px; height: 22px; fill: currentColor; }

/* --- Forms & Inputs --- */
.control-input, .control-textarea, select.control-input {
    width: 100%;
    padding: 10px 12px;
    border-radius: var(--radius-md);
    border: var(--border-width) solid var(--c-border);
    background-color: var(--c-surface);
    color: var(--c-text-1);
    font-size: 1rem;
    transition: var(--transition-fast);
}
.control-input:focus, .control-textarea:focus { border-color: var(--c-primary); box-shadow: 0 0 0 3px var(--c-focus-ring); outline: none; }
#diary-textarea { min-height: 200px; resize: vertical; }

input[type="range"] {
    -webkit-appearance: none; appearance: none;
    width: 100%; height: 6px; background: var(--c-surface-hover);
    border-radius: var(--radius-full); outline: none;
}
input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 18px; height: 18px; background: var(--c-primary); border-radius: 50%; cursor: pointer; }
input[type="range"]::-moz-range-thumb { width: 18px; height: 18px; background: var(--c-primary); border-radius: 50%; cursor: pointer; border: none;}

/* --- Search Bar --- */
.search-bar { position: relative; width: 250px; }
.search-bar_input { padding-left: var(--space-md); padding-right: var(--space-xl); border-radius: var(--radius-full); }
#clear-search-btn { position: absolute; right: 4px; top: 50%; transform: translateY(-50%); }

/* --- Profile Avatar --- */
.profile-avatar {
    width: 40px; height: 40px;
    border-radius: var(--radius-full);
    background-color: var(--c-primary); color: var(--c-white);
    display: flex; align-items: center; justify-content: center;
    font-size: 18px; font-weight: 700;
    overflow: hidden; cursor: pointer;
    border: 2px solid var(--c-border);
}

/* --- Diary Entry Card --- */
.diary-entry {
    background-color: var(--c-surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    box-shadow: var(--shadow-md);
    border: var(--border-width) solid var(--c-border);
    animation: fadeIn 0.5s ease-out forwards;
    opacity: 0; transform: translateY(20px);
}
.entry-meta { display: flex; flex-wrap: wrap; align-items: center; gap: var(--space-md); position: relative; }
.author-info { display: flex; align-items: center; gap: var(--space-sm); font-weight: 500; }
.author-info .avatar { width: 32px; height: 32px; border-radius: 50%; background-color: var(--c-primary-light); display: flex; align-items: center; justify-content: center; font-size: 14px; color: var(--c-primary); overflow: hidden;}
.timestamp { font-size: 13px; color: var(--c-text-3); }
.entry-tags { display: flex; gap: var(--space-sm); margin-left: auto; }
.tag { background-color: var(--c-surface-hover); color: var(--c-text-2); padding: var(--space-xs) var(--space-sm); border-radius: var(--radius-full); font-size: 12px; }
.entry-actions { position: absolute; right: calc(var(--space-md) * -1); top: calc(50% - 20px); background-color: var(--c-surface); border-radius: var(--radius-full); padding: var(--space-xs); box-shadow: var(--shadow-md); border: var(--border-width) solid var(--c-border); display: flex; gap: var(--space-xs); opacity: 0; transition: var(--transition-fast); transform: translateY(10px) scale(0.9); pointer-events: none; }
.diary-entry:hover .entry-actions { opacity: 1; transform: translateY(0) scale(1); pointer-events: auto; }
.entry-actions .icon-btn { width: 32px; height: 32px; }
.entry-actions .icon-btn svg { width: 18px; height: 18px; }
.diary-entry .entry-content { font-family: var(--font-main-family); font-size: var(--font-main-size); line-height: 1.8; word-break: break-word; color: var(--c-text-2); margin-top: var(--space-md); transition: font-size 0.3s; }
.entry-content p:last-child { margin-bottom: 0; }

/* --- Modals --- */
.modal-overlay { position: fixed; inset: 0; background: rgba(0, 0, 0, 0.6); display: flex; justify-content: center; align-items: center; z-index: 1000; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; }
.modal-overlay.active { opacity: 1; visibility: visible; }
.modal-content { background: var(--c-surface); border-radius: var(--radius-lg); box-shadow: var(--shadow-lg); width: 90%; max-width: 550px; animation: slideUp 0.4s cubic-bezier(0.165, 0.84, 0.44, 1); max-height: 90vh; display: flex; flex-direction: column;}
.modal-header { padding: var(--space-md) var(--space-lg); border-bottom: var(--border-width) solid var(--c-border); display: flex; justify-content: space-between; align-items: center; }
.modal-title { font-size: 18px; font-weight: 600; margin: 0; }
.modal-header .icon-btn { color: var(--c-text-3); }
.modal-body { padding: var(--space-lg); overflow-y: auto; }
.modal-footer { padding: var(--space-md) var(--space-lg); border-top: var(--border-width) solid var(--c-border); display: flex; justify-content: flex-end; gap: var(--space-sm); }

/* --- Settings Panel --- */
.settings-layout { display: flex; }
.settings-nav { width: 160px; flex-shrink: 0; border-right: var(--border-width) solid var(--c-border); padding: var(--space-sm) 0; }
#settings-nav-list { list-style: none; margin: 0; padding: 0; }
#settings-nav-list li { padding: 12px var(--space-lg); cursor: pointer; border-left: 3px solid transparent; transition: var(--transition-fast); font-size: 14px; }
#settings-nav-list li:hover { background-color: var(--c-surface-hover); }
#settings-nav-list li.active { border-left-color: var(--c-primary); font-weight: 500; color: var(--c-primary); }
.settings-panel.active { display: block; }

.font-control-group { margin-bottom: var(--space-lg); padding-bottom: var(--space-lg); border-bottom: var(--border-width) solid var(--c-border); }
.font-control-group:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
.font-control-group h4 { margin-top: 0; margin-bottom: var(--space-md); font-weight: 500; }
.font-control-item { display: flex; align-items: center; gap: var(--space-md); margin-bottom: var(--space-sm); }
.font-control-item label { flex-shrink: 0; width: 60px; font-size: 14px; color: var(--c-text-2); }
.font-control-item .font-size-value { font-variant-numeric: tabular-nums; width: 45px; text-align: right; color: var(--c-text-2); }

/* --- 3D Book --- */
#diary-book-3d { perspective: 2000px; display: flex; justify-content: center; align-items: center; min-height: 700px; }
.book-wrapper { position: relative; transform-style: preserve-3d; transition: transform 1s; width: 800px; height: 550px; }
.book-cover { position: absolute; width: 50%; height: 100%; background: linear-gradient(to right, #7a5d4a, #8a6d5a); transform-origin: left center; transition: transform 1.4s cubic-bezier(.65,0,.35,1); transform: rotateY(0deg); left: 50%; border-radius: 0 var(--radius-md) var(--radius-md) 0; box-shadow: inset -5px 0 15px rgba(0,0,0,0.2); }
.book-cover.opened { transform: rotateY(-170deg); }
.book-cover::before { content: 'My Diary'; position: absolute; top: 40px; left: 40px; font-size: 32px; color: rgba(255,245,225, 0.8); font-family: 'Georgia', serif; font-style: italic; text-shadow: 1px 1px 3px rgba(0,0,0,0.3);}
.book-pages { position: absolute; width: 100%; height: 100%; top:0; left:0; transform-style: preserve-3d; opacity: 0; transition: opacity 0.5s; }
.book-pages.visible { opacity: 1; }
.pages-container { position: absolute; width: calc(50% - 10px); height: calc(100% - 20px); left: 10px; top: 10px; transform-style: preserve-3d; }
.book-page { position: absolute; width: 100%; height: 100%; background: #fdfaf2; border: var(--border-width) solid #e0d9c9; transform-origin: left center; transition: transform 0.8s ease-in-out; backface-visibility: hidden; overflow: hidden; }
.book-page.flipped { transform: rotateY(-180deg); }
.page-content-wrapper { padding: var(--space-lg); box-sizing: border-box; width: 100%; height: 100%; display: flex; flex-direction: column;}
.book-page .page-header { font-family: var(--font-book-family); padding-bottom: var(--space-sm); border-bottom: var(--border-width) solid #d1c8b8; margin-bottom: var(--space-sm); color: #5a483a; font-size: 14px; }
.book-page .page-content { font-family: var(--font-book-family); font-size: var(--font-book-size); line-height: 1.9; flex-grow: 1; overflow-y: auto; color: #3d3d3d; transition: font-size 0.3s; }
.book-page .page-number { font-size: 12px; color: #9a8a79; text-align: center; margin-top: auto; padding-top: var(--space-sm); }
.book-controls { display: flex; justify-content: center; align-items: center; gap: var(--space-lg); margin-top: var(--space-xl); }

/* --- Miscellaneous --- */
#toast-container { position: fixed; top: 80px; right: 20px; z-index: 2000; display: flex; flex-direction: column; gap: 10px; }
.toast { padding: 12px 20px; border-radius: var(--radius-md); color: var(--c-white); background-color: var(--c-success); box-shadow: var(--shadow-lg); opacity: 0; transform: translateX(120%); transition: all 0.4s cubic-bezier(0.215, 0.610, 0.355, 1); }
.toast.show { opacity: 1; transform: translateX(0); }
.toast.error { background-color: var(--c-danger); }
.toast.info { background-color: var(--c-primary); }

#scroll-to-top-btn { position: fixed; bottom: var(--space-xl); right: var(--space-xl); opacity: 0; visibility: hidden; transition: var(--transition-fast); }
#scroll-to-top-btn.show { opacity: 1; visibility: visible; }

/* 6. ANIMATIONS */
@keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }
@keyframes slideUp { from { transform: translateY(30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
